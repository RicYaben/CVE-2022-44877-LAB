# -*- mode: ruby -*-
# vi: set ft=ruby :
Vagrant.require_plugin "vagrant-vbguest"

Vagrant.configure("2") do |config|

    config.vm.define "kali" do |kali|
        kali.vm.box = "kalilinux/rolling"
        kali.vm.hostname = "kali"

        # Add the machine to a private network
        kali.vm.network "private_network", ip: "192.168.50.11"
        kali.vm.synced_folder "material", "/home/vagrant/Desktop/material"

        kali.vm.provision "shell", inline: <<-SHELL
            apt-get update
            apt-get -y install suricata nmap wireshark
        SHELL

        kali.vm.provider :virtualbox do |vb|
            vb.name = "Kali"
        end
    end

    # Define the CentOS virtual machine
    config.vm.define "cwp" do |cwp|
        # https://app.vagrantup.com/ricardoyaben/boxes/CWP-LAB/versions/1.0.0
        cwp.vm.box = "ricardoyaben/CWP-LAB"
        config.vm.box_version = "1.0.0"

        # Rename the box
        cwp.vm.hostname = "cwp"

        # Give it an IP address and add the insecure key
        cwp.vm.network "private_network", ip: "192.168.50.10"
        cwp.ssh.private_key_path = './insecure-key'
        cwp.ssh.insert_key = false

        cwp.vm.provider :virtualbox do |vb|
            vb.name = "CWP"
        end
    end

    # Configure virtual machine memory and CPU
    config.vm.provider "virtualbox" do |vb|
        vb.memory = "2048"
        vb.cpus = 2
    end
  
  end
