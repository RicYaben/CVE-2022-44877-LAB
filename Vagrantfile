# -*- mode: ruby -*-
# vi: set ft=ruby :
Vagrant.require_plugin "vagrant-reload"

Vagrant.configure("2") do |config|

    # Define the virtual machine
    config.vm.define "cwp" do |node|
        node.vm.box = "centos/7"
        node.vm.hostname = "cwp"
        
        # Add the machine to a private network
        node.vm.network "private_network", ip: "192.168.50.10"
        
        # Provision the virtual machine with shell script
        node.vm.provision "shell", path: "cwp.sh"
        node.vm.provision :reload

        # Downgrade to the right version
        node.vm.provision "shell", path: "downgrade.sh"
        node.vm.provision :reload

    end

    # Configure virtual machine memory and CPU
    config.vm.provider "virtualbox" do |vb|
        vb.memory = "1024"
        vb.cpus = 1
    end
  
  end